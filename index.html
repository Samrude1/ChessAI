<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>RobCo Chess Terminal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <script>
    // Load theme before page renders to prevent flash
    (function () {
      const themes = {
        blue: '#80dfff',
        green: '#33ff33',
        red: '#ff4444'
      };
      const savedTheme = localStorage.getItem('chessTheme') || 'blue';
      document.documentElement.style.setProperty('--terminal-blue', themes[savedTheme]);
    })();
  </script>
  <style>
    :root {
      --terminal-blue: #80dfff;
      /* Phosphor Blue */
      --terminal-bg: #050a0f;
    }

    body {
      background-color: #000;
      color: var(--terminal-blue);
      font-family: 'VT323', monospace;
      overflow: hidden;
      /* Prevent body scroll to stop jumping */
      margin: 0;
      height: 100vh;
      width: 100vw;
      /* CRT Color Distortion - Removed for theme compatibility */
      text-shadow: 0 0 8px var(--terminal-blue);
      animation: glitch-random 25s infinite;
    }

    /* Override default selection colors */
    ::selection {
      background-color: var(--terminal-blue);
      color: #000;
    }

    ::-moz-selection {
      background-color: var(--terminal-blue);
      color: #000;
    }

    #root {
      /* Monitor Blur & Bloom - Reduced for better readability */
      filter: blur(0.4px) contrast(1.2) brightness(1.1);
      width: 100%;
      height: 100%;
      animation: distortion 30s infinite;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 12px;
      background: #000;
      border-left: 1px solid color-mix(in srgb, var(--terminal-blue) 20%, #000);
    }

    ::-webkit-scrollbar-thumb {
      background: color-mix(in srgb, var(--terminal-blue) 20%, #000);
      border: 1px solid var(--terminal-blue);
      box-shadow: inset 0 0 5px var(--terminal-blue);
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--terminal-blue);
    }

    /* CRT Effects */
    .scanlines {
      background: linear-gradient(to bottom,
          rgba(0, 0, 0, 0),
          rgba(0, 0, 0, 0) 50%,
          rgba(0, 0, 0, 0.4) 50%,
          rgba(0, 0, 0, 0.4));
      background-size: 100% 6px;
      /* Thicker scanlines for retro feel */
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
      opacity: 0.5;
      /* Slightly darker scanlines to contrast with brightness */
    }

    .crt-flicker {
      animation: flicker 0.15s infinite;
      position: fixed;
      inset: 0;
      background: transparent;
      pointer-events: none;
      z-index: 9998;
    }

    .crt-noise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9997;
      opacity: 0.1;
      /* Increased noise slightly */
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
      animation: noise 0.5s steps(5) infinite;
    }

    /* Vignette / Curve */
    .crt-curve {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.4) 80%, rgba(0, 0, 0, 0.95) 150%);
      pointer-events: none;
      z-index: 9996;
    }

    /* CRT Anomalies - Random glitches */
    .crt-glitch {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9995;
      animation: glitch-random 2s infinite, distortion 3s infinite;
    }

    .crt-glitch::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(transparent 50%, rgba(0, 0, 0, 0.1) 50%);
      background-size: 100% 4px;
      animation: screen-roll 40s infinite;
      opacity: 0;
    }

    @keyframes glitch-random {

      0%,
      97%,
      100% {
        transform: translateX(0) skew(0);
      }

      97.5% {
        transform: translateX(-3px) skew(-0.4deg);
      }

      98% {
        transform: translateX(3px) skew(0.4deg);
      }

      98.5% {
        transform: translateX(-1px);
      }
    }

    @keyframes distortion {

      0%,
      97%,
      100% {
        filter: blur(0.4px) contrast(1.2) brightness(1.1);
      }

      97.5% {
        filter: blur(1.5px) contrast(1.25) brightness(1.12);
      }

      98% {
        filter: blur(1px) contrast(1.22) brightness(1.11);
      }

      98.5% {
        filter: blur(0.6px) contrast(1.21);
      }
    }


    @keyframes screen-roll {

      0%,
      94%,
      100% {
        opacity: 0;
        transform: translateY(0);
      }

      95% {
        opacity: 0.3;
        transform: translateY(5px);
      }

      96% {
        opacity: 0.2;
        transform: translateY(-3px);
      }

      97% {
        opacity: 0;
        transform: translateY(0);
      }
    }

    @keyframes flicker {
      0% {
        opacity: 0.95;
      }

      50% {
        opacity: 1.0;
      }

      100% {
        opacity: 0.96;
      }
    }

    @keyframes noise {
      0% {
        transform: translate(0, 0);
      }

      10% {
        transform: translate(-5%, -5%);
      }

      20% {
        transform: translate(-10%, 5%);
      }

      30% {
        transform: translate(5%, -10%);
      }

      40% {
        transform: translate(-5%, 15%);
      }

      50% {
        transform: translate(-10%, 5%);
      }

      60% {
        transform: translate(15%, 0);
      }

      70% {
        transform: translate(0, 10%);
      }

      80% {
        transform: translate(-15%, 0);
      }

      90% {
        transform: translate(10%, 5%);
      }

      100% {
        transform: translate(5%, 0);
      }
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      10%,
      30%,
      50%,
      70%,
      90% {
        transform: translateX(-2px);
      }

      20%,
      40%,
      60%,
      80% {
        transform: translateX(2px);
      }
    }

    .animate-shake {
      animation: shake 0.5s infinite;
    }

    .glow-text {
      text-shadow: 0 0 6px var(--terminal-blue), 0 0 12px var(--terminal-blue);
      color: var(--terminal-blue);
    }

    .terminal-border {
      border: 2px solid var(--terminal-blue);
      box-shadow: 0 0 20px var(--terminal-blue), inset 0 0 40px rgba(0, 0, 0, 0.9);
      background: #000508;
    }

    .text-theme {
      color: var(--terminal-blue);
    }

    .border-theme {
      border-color: var(--terminal-blue);
    }


    .bg-theme-dim {
      background-color: color-mix(in srgb, var(--terminal-blue) 15%, transparent);
    }

    .bg-theme {
      background-color: var(--terminal-blue);
    }

    .shadow-theme {
      box-shadow: 0 0 6px var(--terminal-blue);
    }

    .border-theme-dim {
      border-color: var(--terminal-blue);
      opacity: 0.1;
    }

    /* Board square highlights - use separate divs with opacity */
    .bg-theme-highlight-light {
      background-color: var(--terminal-blue);
      opacity: 0.25;
    }

    .bg-theme-highlight-strong {
      background-color: var(--terminal-blue);
      opacity: 0.35;
    }

    /* Light board squares */
    .bg-theme-square-light {
      background-color: var(--terminal-blue);
      opacity: 0.25;
    }

    /* Board square borders */
    .border-theme-dim {
      border: 0.5px solid;
      border-color: var(--terminal-blue);
      opacity: 0.1;
    }

    /* Check state background */
    .bg-theme-check {
      background-color: var(--terminal-blue);
      opacity: 0.5;
    }

    /* Range Slider Thumb */
    input[type="range"]::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--terminal-blue);
      cursor: pointer;
      border: 2px solid #000;
      box-shadow: 0 0 8px var(--terminal-blue);
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--terminal-blue);
      cursor: pointer;
      border: 2px solid #000;
      box-shadow: 0 0 8px var(--terminal-blue);
    }

    /* Remove default details/summary styling */
    details summary {
      outline: none;
      list-style: none;
    }

    details summary::-webkit-details-marker {
      display: none;
    }

    /* Override all button states to prevent orange/amber colors */
    button:focus,
    button:active,
    button:focus-visible {
      outline: none !important;
      outline-color: transparent !important;
    }
  </style>
  <script type="importmap">
{
  "imports": {
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "chess.js": "https://aistudiocdn.com/chess.js@^1.4.0"
  }
}
</script>
  <link rel="stylesheet" href="/index.css">
</head>

<body class="bg-black h-screen w-screen overflow-hidden">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>

</html>